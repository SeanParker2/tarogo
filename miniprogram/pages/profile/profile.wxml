<view class="page">
  <view class="container">
    <image class="avatar" src="{{userInfo?.avatarUrl || '/images/default-avatar.png'}}"></image>
    <text class="name">{{userInfo?.nickname || '未登录'}}</text>
    <button class="btn" wx:if="{{!token}}" bindtap="goLogin">点击登录</button>
    <view class="stats">
      <view class="stat"><text>累计洞察</text><text class="n">{{stats.total || 0}}</text></view>
      <view class="stat"><text>VIP</text><text class="n">{{isVip ? '是' : '否'}}</text></view>
    </view>

    <view wx:if="{{token}}" style="margin-top:30rpx">
      <text>AI人设：</text>
      <picker mode="selector" range="{{personas}}" value="{{personaIndex}}" bindchange="onPersonaChange">
        <view class="btn">{{currentPersonaLabel}}</view>
      </picker>
    </view>

    <view wx:if="{{token}}" style="margin-top:20rpx">
      <button class="btn" bindtap="subscribeDaily">订阅每日能量</button>
    </view>

    <view wx:if="{{token}}" style="margin-top:20rpx">
      <button class="btn" bindtap="openVip">开通VIP</button>
    </view>
  </view>
</view>